{% extends 'base.html' %}

{% block css %}

{% endblock %}

{% block body %}
    <div id="container" class="effect mainnav-lg mainnav-fixed navbar-fixed footer-fixed">

        <!--NAVBAR-->
        <!--===================================================-->
        <header id="navbar">
            <div id="navbar-container" class="boxed">

                <!--Brand logo & name-->
                <!--================================-->
                <div class="navbar-header">
                    <a href="{% url 'index' %}" class="navbar-brand">
                        <img src="/static/plugin/nifty/img/logo.png" alt="Nifty Logo" class="brand-icon">
                        <div class="brand-title">
                            <span class="brand-text">监控系统</span>
                        </div>
                    </a>
                </div>
                <!--================================-->
                <!--End brand logo & name-->


                <!--Navbar Dropdown-->
                <!--================================-->
                <div class="navbar-content clearfix">
                    <ul class="nav navbar-top-links pull-left">

                        <!--Navigation toogle button-->
                        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                        <li class="tgl-menu-btn">
                            <a class="mainnav-toggle" href="#">
                                <i class="fa fa-navicon fa-lg"></i>
                            </a>
                        </li>
                        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                        <!--End Navigation toogle button-->

                    </ul>
                    <ul class="nav navbar-top-links pull-right">

                        <!--User dropdown-->
                        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                        <li id="dropdown-user" class="dropdown">
                            <a href="#" data-toggle="dropdown" class="dropdown-toggle text-right">
								<span class="pull-right">
									<img class="img-circle img-user media-object" src="/static/plugin/nifty/img/av1.png"
                                         alt="Profile Picture">
								</span>
                                <div class="username hidden-xs">{{ request.user.name }}</div>
                            </a>


                            <div class="dropdown-menu dropdown-menu-md dropdown-menu-right with-arrow panel-default">

                                <!-- Dropdown heading  -->
                                <div class="pad-all bord-btm">
                                    <p class="text-lg text-muted text-thin mar-btm">你好，{{ request.user.name }}</p>
                                </div>

                                <!-- User dropdown menu -->
                                <ul class="head-list">
                                    <li>
                                        <a href="{% url 'user_info' %}">
                                            <i class="fa fa-user fa-fw fa-lg"></i> 个人信息
                                        </a>
                                    </li>
                                </ul>

                                <!-- Dropdown footer -->
                                <div class="pad-all text-right">
                                    <a href="{% url 'acclogout' %}" class="btn btn-dark">
                                        <i class="fa fa-sign-out fa-fw"></i> 登出
                                    </a>
                                </div>
                            </div>
                        </li>
                        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                        <!--End user dropdown-->

                    </ul>
                </div>
                <!--================================-->
                <!--End Navbar Dropdown-->

            </div>
        </header>
        <!--===================================================-->
        <!--END NAVBAR-->

        <div class="boxed">

            <!--CONTENT CONTAINER-->
            <!--===================================================-->
            <div id="content-container">

                <!--Breadcrumb-->
                <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                <div style="margin-top: 10px">
                    <ol class="breadcrumb">
                        {% block page-path %}
                            <li><a href="{% url 'index' %}">仪表盘</a></li>
                        {% endblock %}
                    </ol>
                </div>

                <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                <!--End breadcrumb-->


                <!--Page content-->
                <!--===================================================-->

                <div id="page-content">
                    {% block page-content %}
                        <div class="panel">
                            <!--Panel heading-->
                            <div class="panel-heading">

                                <h3 class="panel-title">EasyMonitor状态</h3>
                            </div>
                            <!--Default panel contents-->
                            <div class="panel-body">
                                <!--Table-->
                                <table class="table">
                                    <thead>
                                    <tr>
                                        <th>参数</th>
                                        <th>值</th>
                                        <th>细节</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>主机(主机数量/主机状态[在线/问题/其他])</td>
                                        <td>{{ host_info_dict.count }}</td>
                                        <td>
                                            <span style="color: green">{{ host_info_dict.online }}</span>
                                            /
                                            <span style="color: red">{{ host_info_dict.problem }}</span>
                                            /
                                            <span style="color: grey">{{ host_info_dict.other }}</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>触发器(数量/启动状态[启用/禁用])</td>
                                        <td>{{ trigger_info_dict.count }}</td>
                                        <td>
                                            <span style="color: green">{{ trigger_info_dict.enabled }}</span>
                                            /
                                            <span style="color: red">{{ trigger_info_dict.disabled }}</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>报警策略(数量/启动状态[启用/禁用])</td>
                                        <td>{{ action_info_dict.count }}</td>
                                        <td>
                                            <span style="color: green">{{ action_info_dict.enabled }}</span>
                                            /
                                            <span style="color: red">{{ action_info_dict.disabled }}</span>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="panel">
                            <!--Panel heading-->
                            <div class="panel-heading">

                                <h3 class="panel-title">系统状态</h3>
                            </div>
                            <!--Default panel contents-->
                            <div class="panel-body">
                                <!--Table-->
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>主机群组</th>
                                        <th>灾难</th>
                                        <th>严重</th>
                                        <th>一般严重</th>
                                        <th>警告</th>
                                        <th>信息</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for host_group_name, value in host_group_info_dict.items %}
                                        <tr>
                                            <td>{{ host_group_name }}</td>
                                            {% if value.disaster %}
                                                <td class="danger">{{ value.disaster }}</td>
                                            {% else %}
                                                <td class="success">{{ value.disaster }}</td>
                                            {% endif %}
                                            {% if value.high %}
                                                <td class="danger">{{ value.high }}</td>
                                            {% else %}
                                                <td class="success">{{ value.high }}</td>
                                            {% endif %}
                                            {% if value.general %}
                                                <td class="active">{{ value.general }}</td>
                                            {% else %}
                                                <td class="success">{{ value.general }}</td>
                                            {% endif %}
                                            {% if value.warning %}
                                                <td class="warning">{{ value.warning }}</td>
                                            {% else %}
                                                <td class="success">{{ value.warning }}</td>
                                            {% endif %}
                                            {% if value.information %}
                                                <td class="info">{{ value.information }}</td>
                                            {% else %}
                                                <td class="success">{{ value.information }}</td>
                                            {% endif %}
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="panel">
                            <!--Panel heading-->
                            <div class="panel-heading">

                                <h3 class="panel-title">主机状态</h3>
                            </div>
                            <!--Default panel contents-->
                            <div class="panel-body">
                                <!--Table-->
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>主机群组</th>
                                        <th>无问题</th>
                                        <th>有问题</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for host_group_name, value in host_group_info_dict.items %}
                                        <tr>
                                            <td>{{ host_group_name }}</td>
                                            <td class="success">{{ value.no_problem }}</td>
                                            <td class="success">{{ value.problem }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    {% endblock %}
                </div>


                <!--===================================================-->
                <!--End page content-->


            </div>
            <!--===================================================-->
            <!--END CONTENT CONTAINER-->


            <!--MAIN NAVIGATION-->
            <!--===================================================-->
            <nav id="mainnav-container">
                <div id="mainnav">

                    <!--Shortcut buttons-->
                    <!--================================-->
                    <div id="mainnav-shortcut">
                        <ul class="list-unstyled">
                            <li class="col-xs-4" data-content="图形">
                                <a id="demo-toggle-aside" class="shortcut-grid" href="#">
                                    <i class="fa fa-signal"></i>
                                </a>
                            </li>
                            <li class="col-xs-4" data-content="最新数据">
                                <a id="demo-alert" class="shortcut-grid" href="#">
                                    <i class="fa fa-database"></i>
                                </a>
                            </li>
                            <li class="col-xs-4" data-content="主机">
                                <a id="demo-page-alert" class="shortcut-grid" href="#">
                                    <i class="fa fa-laptop"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!--================================-->
                    <!--End shortcut buttons-->

                    <!--Menu-->
                    <!--================================-->
                    <div id="mainnav-menu-wrap">
                        <div class="nano">
                            <div class="nano-content">
                                <ul id="mainnav-menu" class="list-group">

                                    <!--Menu list item-->
                                    <li>
                                        <a href="{% url 'index' %}">
                                            <i class="fa fa-tachometer"></i>
                                            <span class="menu-title">
                                                <strong>仪表盘</strong>
                                                <span class="label label-danger pull-right">Top</span>
                                            </span>
                                        </a>
                                    </li>

                                    <!--Menu list item-->
                                    <li>
                                        <a href="#">
                                            <i class="fa fa-desktop"></i>
                                            <span class="menu-title">
												<strong>监测中</strong>
											</span>
                                            <i class="arrow"></i>
                                        </a>

                                        <!--Submenu-->
                                        <ul class="collapse">
                                            <li><a href="">最新数据</a></li>
                                            <li><a href="">图形</a></li>
                                        </ul>
                                    </li>

                                    <!--Menu list item-->
                                    <li>
                                        <a href="#">
                                            <i class="fa fa-cogs"></i>
                                            <span class="menu-title">
												<strong>配置</strong>
											</span>
                                            <i class="arrow"></i>
                                        </a>

                                        <!--Submenu-->
                                        <ul class="collapse">
                                            <li><a href="{% url 'host' %}">主机</a></li>
                                            <li><a href="{% url 'host_group' %}">主机组</a></li>
                                            <li><a href="">模板</a></li>
                                            <li><a href="">动作</a></li>
                                        </ul>
                                    </li>

                                    <!--Menu list item-->
                                    <li>
                                        <a href="#">
                                            <i class="fa fa-users"></i>
                                            <span class="menu-title">
												<strong>管理</strong>
											</span>
                                            <i class="arrow"></i>
                                        </a>

                                        <!--Submenu-->
                                        <ul class="collapse">
                                            <li><a href="">用户</a></li>
                                        </ul>
                                    </li>

                                </ul>

                            </div>
                        </div>
                    </div>
                    <!--================================-->
                    <!--End menu-->

                </div>
            </nav>
            <!--===================================================-->
            <!--END MAIN NAVIGATION-->


        </div>


        <!-- SCROLL TOP BUTTON -->
        <!--===================================================-->
        <button id="scroll-top" class="btn"><i class="fa fa-chevron-up"></i></button>
        <!--===================================================-->


    </div>
    <!--===================================================-->
    <!-- END OF CONTAINER -->
{% endblock %}

{% block js %}
    <script type="text/javascript" src="/static/plugin/highcharts/code/highcharts.js"></script>
    <script type="text/javascript" src="/static/plugin/highcharts/code/highcharts-3d.js"></script>
{% endblock %}